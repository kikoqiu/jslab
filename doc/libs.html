<h2>Libraries</h2>
<p>JSLab integrates with several powerful JavaScript libraries to extend its functionality.</p>

<section id="mathjs">
    <h3>Math.js</h3>
    <p>
        <a href="https://mathjs.org/" target="_blank">Math.js</a> is an extensive math library for JavaScript and Node.js. It features a flexible expression parser,
        a large set of built-in functions and constants, and provides an integrated solution to work with different
        data types like numbers, big numbers, complex numbers, fractions, units, matrices, and more.
    </p>
    <p>
        Many Math.js functions are directly accessible in JSLab, or through the <code>math</code> global object.
        For example, you can use <code>math.sqrt(9)</code> or <code>math.evaluate('2 + 3 * ans', { ans: 5 })</code>.
        JSLab's <code>box.compile_expr</code>, <code>box.eval_expr</code>, <code>box.deriv</code>, and <code>box.symplify</code> functions
        also leverage Math.js for symbolic computation.
    </p>
    <h4>Key Features:</h4>
    <ul>
        <li>Supports numbers, big numbers, complex numbers, fractions, units, matrices, and more.</li>
        <li>Powerful expression parser.</li>
        <li>Symbolic computation (derivatives, simplification).</li>
        <li>Large set of built-in functions.</li>
        <li>Extensible.</li>
    </ul>
    <h4>Basic Usage Examples:</h4>
    <pre><code>// Direct function calls
math.sqrt(25);      // Returns 5
math.add(2, 3);     // Returns 5
math.unit('5 cm') + math.unit('10 mm'); // Returns Unit {value: 0.06, unit: "m"}

// Using the expression parser
math.evaluate('1.2 * (2 + 4.5)'); // Returns 7.8
math.evaluate('sin(45 deg)^2');   // Returns 0.5
math.evaluate('9 / 3 + 2i');      // Returns Complex {re: 3, im: 2}

// Symbolic differentiation using box.deriv
box.deriv('x^2 + 3x', 'x'); // Returns '2 * x + 3'

// Evaluate an expression with a scope
const scope = { a: 5, b: 3 };
math.evaluate('a * b', scope); // Returns 15</code></pre>
    <p>For more detailed documentation and a full list of functions, please visit the <a href="https://mathjs.org/docs/index.html" target="_blank">official Math.js documentation</a>.</p>
</section>


<section id="d3">
    <h3>d3.js</h3>
    <p>
        <a href="https://d3js.org/" target="_blank">d3.js</a>
    </p>
    <h4>Basic Usage Examples:</h4>
    <pre><code>
//load d3 with animation (transition) support
box.loadD3(true);
const generateRandomData = (numMonths = 12, numValues = 3) => {
  const data = [];
  const startDate = new Date('2023-01');
  
  for (let i = 0; i &lt; numMonths; i++) {
    const date = new Date(startDate);
    date.setMonth(startDate.getMonth() + i);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const dateStr = `${year}-${month}`;
    
    const values = Array.from({length: numValues}, () => Math.floor(Math.random() * 100) + 1);
    
    data.push({ date: dateStr, values });
  }
  
  return data;
};
let data = generateRandomData(12,10);


const margin = { top: 20, right: 30, bottom: 40, left: 40 };
const width = 800 - margin.left - margin.right;
const height = 400 - margin.top - margin.bottom;

const svg = d3.select('body')
  .append('svg')
  .attr('width', width + margin.left + margin.right)
  .attr('height', height + margin.top + margin.bottom)
  .append('g')
  .attr('transform', `translate(${margin.left},${margin.top})`);

const x = d3.scaleBand()
  .domain(data[0].values.map((_, i) => `Series ${i + 1}`))
  .range([0, width])
  .padding(0.1);

const y = d3.scaleLinear()
  .domain([0, d3.max(data.flatMap(d => d.values))])
  .nice()
  .range([height, 0]);

const xAxis = svg.append('g')
  .attr('transform', `translate(0,${height})`)
  .call(d3.axisBottom(x));

const yAxis = svg.append('g')
  .call(d3.axisLeft(y));

const title = svg.append('text')
  .attr('x', width / 2)
  .attr('y', -margin.top / 2)
  .attr('text-anchor', 'middle')
  .style('font-size', '16px')
  .style('font-weight', 'bold');

const bars = svg.selectAll('.bar')
  .data(data[0].values)
  .enter()
  .append('rect')
  .attr('class', 'bar')
  .attr('x', (d, i) => x(`Series ${i + 1}`))
  .attr('y', height)
  .attr('width', x.bandwidth())
  .attr('height', 0)
  .attr('fill', 'steelblue');

async function animate() {
  for (let i = 0; i &lt; data.length; i++) {
     const transition = svg.transition()
        .duration(500)
        .ease(d3.easeLinear);
    
    const currentData = data[i];
    title.text(`Date: ${currentData.date}`);
    
    bars.data(currentData.values)
    .join(
      enter => enter.append("rect")
        .attr("x", x(0))
        .attr("y", d => y(d).rank),
      update => update,
      exit => exit.transition(transition).remove().attr("y", d => y(d).rank)
    ).call(bar=>bar
      .transition(transition)
      .attr('y', d => y(d))
      .attr('height', d => height - y(d))
    );
    
    await transition.end();
  }
}

await animate();
</code></pre>
</section>

<!-- Future libraries can be added here following a similar structure -->
<section id="other-libraries">
    <h3>Other Integrated Libraries</h3>
    <ul>
        <li><strong>Plotly.js:</strong> Used for interactive plotting. Accessible via <code>box.plotly</code>, <code>box.plot</code>, and <code>box.plot3d</code>.</li>
        <li><strong>LibBF.js:</strong> Provides arbitrary-precision floating-point arithmetic. Accessible via <code>bfjs</code> global object.</li>
    </ul>
    <p>More information about these and other libraries can be found by exploring their respective official documentation.</p>
</section>